# Changelog

Все значимые изменения в проекте будут документироваться в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/lang/ru/).

## [Unreleased]

### Планируется

-   [ ] Дополнительные источники погоды
-   [ ] Почасовой прогноз
-   [ ] Утро/Вечер прогноз
-   [ ] 5-дневный прогноз
-   [ ] прогноз Осадков
-   [ ] Ветер/Давление прогноз
-   [ ] Настройки
-   [ ] Подписки на погоду (уведомления)
-   [ ] Добавление английского языка
-   [ ] Графики и визуализации
-   [ ] Админ-панель

Для более подробного описания переходите на доску Trello по ссылке: https://trello.com/b/ZnRVtPRN/my-telegram-bot-all-in-one

## [0.2.0] - 2025-12-29

### Добавлено

-   MIT License для проекта
-   Полная документация в README.md
-   Новая модель таблицы для погодных сообщений (WeatherAllInfo)
-   WeatherRepository в фабрику репозиториев
-   Система кэширования Redis для погодных данных
-   Методы репозитория для работы с погодой
-   Коды погоды для всех состояний (WMO, WeatherAPI, VisualCrossing)
-   Парсер Яндекс.Погоды для текущей погоды
-   Модуль headers для создания заголовков HTTP-запросов
-   Методы парсинга для работы с HTML

### Изменено

-   Оптимизирована система кэширования (перенесено в Redis)
-   Рефакторинг parser.py для асинхронной работы
-   Преобразование save_load_delete в асинхронные функции
-   Улучшена обработка погодных сообщений

### Исправлено

-   Циклические импорты в модулях
-   Баги с идентичными файлами логов
-   Ошибки в логгере и оптимизация импортов

## [0.1.5] - 2025-12-22

### Добавлено

-   Интеграция Яндекс.Погоды в WeatherService
-   Поддержка WeatherAPI для текущей погоды
-   Ссылка на WeatherAPI в конфигурации
-   VisualCrossing API для погоды
-   Ключи API в конфигурацию и .env

### Изменено

-   Улучшены русские сообщения о погоде
-   Рефакторинг всех функций на async/await
-   Оптимизированы импорты в сервисах

### Исправлено

-   Ошибки в методе get_weather_now для OpenMeteo
-   KeyError в api_helper для VisualCrossing
-   Ошибки в обработчиках callback

## [0.1.0] - 2025-12-12

### Добавлено

-   Модуль cord_and_city для работы с геокодингом
-   Модуль api_helper с функциями get_raw_link_api и req_data
-   Общая структура ответов для всех погодных API
-   Зависимость beautifulsoup4 для парсинга

### Изменено

-   Перенос логики из callback в WeatherService
-   Рефакторинг кода геокодинга (удалены 2 старых файла)
-   Рефакторинг OpenMeteo для новой структуры
-   Удалён класс WeatherService (переход на функции)

### Исправлено

-   Мелкие ошибки в русских текстах
-   Исправлены импорты в сервисах

## [0.0.8] - 2025-12-01

### Добавлено

-   Полная система репозиториев для взаимодействия с БД
-   BaseRepository - базовый класс для всех репозиториев
-   UserRepository для работы с пользователями
-   Фабрика репозиториев (create_repositories)
-   Отдельный файл для Redis кэша

### Изменено

-   Разделение базы данных и Redis
-   Интеграция репозиториев в main, messages, callbacks, keyboards, middlewares
-   Изменена система кэширования

### Исправлено

-   Мелкие ошибки в WeatherService

## [0.0.7] - 2025-11-30

### Добавлено

-   Новая система логирования
-   Настраиваемые уровни логирования для модулей
-   Разделение конфигурации и настройки логгера

### Изменено

-   Полная переработка системы логирования
-   Удалён старый логгер

### Исправлено

-   Мелкая ошибка в команде weatherNow

## [0.0.6] - 2025-11-27

### Исправлено

-   Ошибки импортов
-   Мелкие баги в обработчиках

## [0.0.5] - 2025-11-26

### Добавлено

-   Функционал определения локации и устройства
-   Redis кэширование для методов базы данных
-   Вспомогательные функции для работы с состояниями (state_helper)
-   Методы update, delete для работы с кэшем

### Изменено

-   Продолжен рефакторинг кодовой базы
-   Обновлены все сообщения в i18n (русский язык)
-   Исправлены все методы WeatherService
-   Оптимизированы импорты в utils
-   Обновлён requirements.txt

### Исправлено

-   Отображение города в меню погоды
-   Импорты сервисов и состояний
-   Все функции локации и устройства
-   Добавлена кнопка "Назад" в сообщение выбора устройства

## [0.0.4] - 2025-11-15

### Добавлено

-   Middleware для базы данных
-   Методы БД: create_tables_and_database, create_one_user, update, delete, find
-   Методы для работы с множественными пользователями
-   Тестирование базы данных
-   Сохранение данных пользователей при старте
-   Оптимизация остановки бота (корректное закрытие всех процессов)

### Изменено

-   Обновлён .gitignore
-   Оптимизированы импорты

### Исправлено

-   Ошибки в модели базы данных
-   Ошибки импортов

### Удалено

-   Тестовые файлы

## [0.0.3] - 2025-11-14

### Исправлено

-   Критические ошибки (технический коммит)

## [0.0.2] - 2025-11-11

### Добавлено

-   SQLite через SQLAlchemy
-   Базовая схема конфигурации для системы БД
-   Модель SQLAlchemy для данных пользователей
-   Валидация конфигурации базы данных

### Изменено

-   Отредактирована схема пользователя
-   Оптимизированы импорты
-   Оптимизирован requirements.txt

## [0.0.1] - 2025-11-10

### Добавлено

-   Рефакторинг структуры проекта
-   Подготовка к добавлению SQLite и PostgreSQL
-   Alembic для миграций баз данных
-   Обновлённая UserSchema

### Изменено

-   Отредактированы фильтры
-   Изменена структура бота
-   Адаптирован Logging.py под новую структуру

## [0.0.0-alpha.8] - 2025-11-08

### Добавлено

-   Локализация (i18n) для всех модулей

### Изменено

-   Удалены неиспользуемые зависимости

### Исправлено

-   Ошибка в callback обработчиках
-   Проблемы с webhook

## [0.0.0-alpha.7] - 2025-11-07

### Добавлено

-   Система интернационализации Fluentogram
-   Все текстовые сообщения и кнопки в i18n
-   Стартовое меню и меню погоды
-   Обработчики погоды и callbacks
-   Автоматический туннель Tuna для webhook
-   Модель пользователя
-   Middleware для переводов

### Изменено

-   Продолжен рефакторинг кодовой базы
-   Перемещены функции save/load в новую утилиту
-   Удалён AppConfig (возможно вернётся позже)
-   Обновлены **init** файлы

### Исправлено

-   Ошибка в ftl файлах

## [0.0.0-alpha.6] - 2025-10-26

### Добавлено

-   Docker поддержка
-   Система webhook

### Изменено

-   Полный рефакторинг всей кодовой базы

## [0.0.0-alpha.5] - 2025-10-19

### Добавлено

-   Город в сообщение weather_now
-   Текущее время в сообщение погоды
-   Эмодзи день/ночь
-   Новая функция для получения одного параметра локации
-   Новые текстовые сообщения в JSON

### Изменено

-   Исправлена ссылка на API Open-Meteo

### Исправлено

-   Тесты UserDataService

## [0.0.0-alpha.4] - 2025-10-17

### Добавлено

-   Обработчик команды /location
-   Проверка null для локации и погоды в callbacks
-   Новые функции для проверки null ошибок
-   Обновлён .gitignore (игнорируются файлы логов)

### Исправлено

-   Null ошибка при сохранении данных пользователя
-   Текстовые сообщения

## [0.0.0-alpha.3] - 2025-10-13

### Добавлено

-   Сообщения о разработке для незавершённых функций
-   Кнопки и тестовое сообщение для текущей погоды
-   Новая функция в Open-Meteo для запросов к API
-   Интеграция нескольких погодных API в get_weather_now
-   Callback для текущей погоды

### Изменено

-   Отредактирована функция get_weather_now для поддержки множественных API

## [0.0.0-alpha.2] - 2025-10-12

### Добавлено

-   API сервис для названий городов
-   Система отладки для локации

### Изменено

-   Улучшено отображение городов на кнопках
-   Отредактированы текстовые сообщения

### Исправлено

-   Мелкие ошибки
-   Ошибки отображения городов

## [0.0.0-alpha.1] - 2025-09-28

### Добавлено

-   Сервис данных пользователя (UserDataService)
-   State helper функции
-   Новый функционал в GeocodingAPI
-   Сохранение локации и данных пользователя

### Изменено

-   Обновлён .gitignore
-   Отредактировано состояние для обработчика локации
-   Обновлены текстовые сообщения

### Исправлено

-   Ошибка в состоянии локации

## [0.0.0-dev.6] - 2025-09-24

### Добавлено

-   Геокодинг
-   Определение устройства
-   Состояния (FSM) для обработчика локации

### Изменено

-   Улучшено определение устройства

## [0.0.0-dev.5] - 2025-09-22

### Добавлено

-   Определение локации и устройства
-   Обработчики устройства и локации
-   Инициализация всех файлов API сервисов
-   Новые клавиатуры

### Изменено

-   Отредактирован WeatherService
-   Обновлены текстовые сообщения

### Исправлено

-   Различные ошибки

## [0.0.0-dev.4] - 2025-09-21

### Добавлено

-   Меню помощи
-   Новые кнопки для меню погоды
-   WeatherService.py

### Изменено

-   Отредактированы все сообщения
-   Обновлён токен
-   Исправлены ошибки в **main**.py и TextMessages.py

## [0.0.0-dev.3] - 2025-09-20

### Добавлено

-   Новая система для сохранения файлов (AppConfig.py)
-   Новая система для загрузки текстовых сообщений (TextMessages.py)
-   Новая система для загрузки токена (Token.py)

### Изменено

-   Обновлены текстовые сообщения в файлах

### Исправлено

-   Ошибка в weather.py

## [0.0.0-dev.2] - 2025-09-19

### Добавлено

-   Новая система логирования

## [0.0.0-dev.1] - 2025-09-18

### Добавлено

-   Тестирование новой структуры проекта

### Изменено

-   Изменена структура проекта
-   AppConfig.py (будет доработан позже)

## [0.0.0-pre-alpha.4] - 2025-09-17

### Добавлено

-   Новая клавиатура для меню погоды
-   WeatherService.py

### Изменено

-   Отредактированы start.py и k_start.py

### Удалено

-   Удалены неиспользуемые файлы
-   Отредактирован weather.py

## [0.0.0-pre-alpha.3] - 2025-09-17

### Добавлено

-   Обработчик команды start
-   Обработчик погоды
-   Кнопка для погоды

### Изменено

-   Тестирование кнопок

## [0.0.0-pre-alpha.2] - 2025-09-17

### Добавлено

-   Обработчики start и main

### Изменено

-   Разделение файлов

## [0.0.0-pre-alpha.1] - 2025-09-16

### Добавлено

-   Инициализация проекта
-   Базовая структура

## [0.0.0] - 2025-09-16

### Добавлено

-   Первый коммит
-   Создание репозитория

[Unreleased]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.2.0...HEAD
[0.2.0]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.1.5...v0.2.0
[0.1.5]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.1.0...v0.1.5
[0.1.0]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.8...v0.1.0
[0.0.8]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.7...v0.0.8
[0.0.7]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.6...v0.0.7
[0.0.6]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.5...v0.0.6
[0.0.5]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.4...v0.0.5
[0.0.4]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.3...v0.0.4
[0.0.3]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.2...v0.0.3
[0.0.2]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.1...v0.0.2
[0.0.1]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-alpha.8...v0.0.1
[0.0.0-alpha.8]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-alpha.7...v0.0.0-alpha.8
[0.0.0-alpha.7]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-alpha.6...v0.0.0-alpha.7
[0.0.0-alpha.6]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-alpha.5...v0.0.0-alpha.6
[0.0.0-alpha.5]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-alpha.4...v0.0.0-alpha.5
[0.0.0-alpha.4]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-alpha.3...v0.0.0-alpha.4
[0.0.0-alpha.3]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-alpha.2...v0.0.0-alpha.3
[0.0.0-alpha.2]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-alpha.1...v0.0.0-alpha.2
[0.0.0-alpha.1]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-dev.6...v0.0.0-alpha.1
[0.0.0-dev.6]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-dev.5...v0.0.0-dev.6
[0.0.0-dev.5]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-dev.4...v0.0.0-dev.5
[0.0.0-dev.4]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-dev.3...v0.0.0-dev.4
[0.0.0-dev.3]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-dev.2...v0.0.0-dev.3
[0.0.0-dev.2]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-dev.1...v0.0.0-dev.2
[0.0.0-dev.1]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-pre-alpha.4...v0.0.0-dev.1
[0.0.0-pre-alpha.4]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-pre-alpha.3...v0.0.0-pre-alpha.4
[0.0.0-pre-alpha.3]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-pre-alpha.2...v0.0.0-pre-alpha.3
[0.0.0-pre-alpha.2]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0-pre-alpha.1...v0.0.0-pre-alpha.2
[0.0.0-pre-alpha.1]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/compare/v0.0.0...v0.0.0-pre-alpha.1
[0.0.0]: https://github.com/Sh1yden/All-In-One-Telegram-Bot/releases/tag/v0.0.0
